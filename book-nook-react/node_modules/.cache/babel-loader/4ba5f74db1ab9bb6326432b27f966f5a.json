{"ast":null,"code":"var _jsxFileName = \"/workspace/book-nook/book-nook-react/src/pages/reviews/Review.js\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport styles from \"../../styles/Review.module.css\";\nimport { useCurrentUser } from \"../../contexts/CurrentUserContext\";\nimport { Card, Media, OverlayTrigger, Tooltip } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport Avatar from \"../../components/Avatar\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Review = props => {\n  _s();\n  const {\n    id,\n    owner,\n    profile_id,\n    profile_image,\n    comments_count,\n    likes_count,\n    like_id,\n    title,\n    content,\n    ratings,\n    image,\n    updated_at,\n    reviewPage\n  } = props;\n  const currentUser = useCurrentUser();\n  const is_owner = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.username) === owner;\n  const handleLike = async () => {\n    try {\n      const {\n        data\n      } = await axiosRes.review(\"/likes/\", {\n        review: id\n      });\n      setReviews(prevReviews => ({\n        ...prevReviews,\n        results: prevReviews.results.map(review => {\n          return review.id === id ? {\n            ...review,\n            likes_count: review.likes_count + 1,\n            like_id: data.id\n          } : review;\n        })\n      }));\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  const handleUnlike = async () => {\n    try {\n      await axiosRes.delete(`/likes/${like_id}/`);\n      setReviews(prevReviews => ({\n        ...prevReviews,\n        results: prevReviews.results.map(review => {\n          return review.id === id ? {\n            ...review,\n            likes_count: review.likes_count - 1,\n            like_id: null\n          } : review;\n        })\n      }));\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Card, {\n    className: styles.Review,\n    children: [/*#__PURE__*/_jsxDEV(Card.Body, {\n      children: /*#__PURE__*/_jsxDEV(Media, {\n        className: \"align-items-center justify-content-between\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: `/profiles/${profile_id}`,\n          children: [/*#__PURE__*/_jsxDEV(Avatar, {\n            src: profile_image,\n            height: 55\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 13\n          }, this), owner]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex align-items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: updated_at\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this), is_owner && reviewPage && \"...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: `/reviews/${id}`,\n      children: /*#__PURE__*/_jsxDEV(Card.Img, {\n        src: image,\n        alt: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n      children: [title && /*#__PURE__*/_jsxDEV(Card.Title, {\n        className: \"text-center\",\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 19\n      }, this), content && /*#__PURE__*/_jsxDEV(Card.Text, {\n        children: content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }, this), ratings && /*#__PURE__*/_jsxDEV(Card.Text, {\n        className: \"text-center\",\n        children: ratings\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.ReviewBar,\n        children: [is_owner ? /*#__PURE__*/_jsxDEV(OverlayTrigger, {\n          placement: \"top\",\n          overlay: /*#__PURE__*/_jsxDEV(Tooltip, {\n            children: \"You can't like your own review!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 24\n          }, this),\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"far fa-heart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this) : like_id ? /*#__PURE__*/_jsxDEV(\"span\", {\n          onClick: () => {},\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: `fas fa-heart ${styles.Heart}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this) : currentUser ? /*#__PURE__*/_jsxDEV(\"span\", {\n          onClick: () => {},\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: `far fa-heart ${styles.HeartOutline}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(OverlayTrigger, {\n          placement: \"top\",\n          overlay: /*#__PURE__*/_jsxDEV(Tooltip, {\n            children: \"Log in to like reviews!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 24\n          }, this),\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"far fa-heart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this), likes_count, /*#__PURE__*/_jsxDEV(Link, {\n          to: `/reviews/${id}`,\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"far fa-comments\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), comments_count]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n_s(Review, \"fds7nphu8utUA6vXZ6pm2+I3m+M=\", false, function () {\n  return [useCurrentUser];\n});\n_c = Review;\nexport default Review;\nvar _c;\n$RefreshReg$(_c, \"Review\");","map":{"version":3,"names":["React","styles","useCurrentUser","Card","Media","OverlayTrigger","Tooltip","Link","Avatar","jsxDEV","_jsxDEV","Review","props","_s","id","owner","profile_id","profile_image","comments_count","likes_count","like_id","title","content","ratings","image","updated_at","reviewPage","currentUser","is_owner","username","handleLike","data","axiosRes","review","setReviews","prevReviews","results","map","err","console","log","handleUnlike","delete","className","children","Body","to","src","height","fileName","_jsxFileName","lineNumber","columnNumber","Img","alt","Title","Text","ReviewBar","placement","overlay","onClick","Heart","HeartOutline","_c","$RefreshReg$"],"sources":["/workspace/book-nook/book-nook-react/src/pages/reviews/Review.js"],"sourcesContent":["import React from \"react\";\nimport styles from \"../../styles/Review.module.css\";\nimport { useCurrentUser } from \"../../contexts/CurrentUserContext\";\nimport { Card, Media, OverlayTrigger, Tooltip } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport Avatar from \"../../components/Avatar\";\n\nconst Review = (props) => {\n  const {\n    id,\n    owner,\n    profile_id,\n    profile_image,\n    comments_count,\n    likes_count,\n    like_id,\n    title,\n    content,\n    ratings,\n    image,\n    updated_at,\n    reviewPage,\n  } = props;\n\n  const currentUser = useCurrentUser();\n  const is_owner = currentUser?.username === owner;\n\n  const handleLike = async () => {\n    try {\n      const { data } = await axiosRes.review(\"/likes/\", { review: id });\n      setReviews((prevReviews) => ({\n        ...prevReviews,\n        results: prevReviews.results.map((review) => {\n          return review.id === id\n            ? { ...review, likes_count: review.likes_count + 1, like_id: data.id }\n            : review;\n        }),\n      }));\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const handleUnlike = async () => {\n    try {\n      await axiosRes.delete(`/likes/${like_id}/`);\n      setReviews((prevReviews) => ({\n        ...prevReviews,\n        results: prevReviews.results.map((review) => {\n          return review.id === id\n            ? { ...review, likes_count: review.likes_count - 1, like_id: null }\n            : review;\n        }),\n      }));\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return (\n    <Card className={styles.Review}>\n      <Card.Body>\n        <Media className=\"align-items-center justify-content-between\">\n          <Link to={`/profiles/${profile_id}`}>\n            <Avatar src={profile_image} height={55} />\n            {owner}\n          </Link>\n          <div className=\"d-flex align-items-center\">\n            <span>{updated_at}</span>\n            {is_owner && reviewPage && \"...\"}\n          </div>\n        </Media>\n      </Card.Body>\n      <Link to={`/reviews/${id}`}>\n        <Card.Img src={image} alt={title} />\n      </Link>\n      <Card.Body>\n        {title && <Card.Title className=\"text-center\">{title}</Card.Title>}\n        {content && <Card.Text>{content}</Card.Text>}\n        {ratings && <Card.Text className=\"text-center\">{ratings}</Card.Text>}\n        <div className={styles.ReviewBar}>\n          {is_owner ? (\n            <OverlayTrigger\n              placement=\"top\"\n              overlay={<Tooltip>You can't like your own review!</Tooltip>}\n            >\n              <i className=\"far fa-heart\" />\n            </OverlayTrigger>\n          ) : like_id ? (\n            <span onClick={() => {}}>\n              <i className={`fas fa-heart ${styles.Heart}`} />\n            </span>\n          ) : currentUser ? (\n            <span onClick={() => {}}>\n              <i className={`far fa-heart ${styles.HeartOutline}`} />\n            </span>\n          ) : (\n            <OverlayTrigger\n              placement=\"top\"\n              overlay={<Tooltip>Log in to like reviews!</Tooltip>}\n            >\n              <i className=\"far fa-heart\" />\n            </OverlayTrigger>\n          )}\n          {likes_count}\n          <Link to={`/reviews/${id}`}>\n            <i className=\"far fa-comments\" />\n          </Link>\n          {comments_count}\n        </div>\n      </Card.Body>\n    </Card>\n  );\n};\n\nexport default Review;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}